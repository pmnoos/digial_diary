<%= form_with(model: @diary_entry, local: true) do |form| %>

  <% if @diary_entry.errors.any? %>
    <div class="notification is-danger">
      <ul>
        <% @diary_entry.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :title, class: "label" %>
    <div class="control">
      <%= form.text_field :title, class: "input" %>
    </div>
  </div>

  <div class="field">
    <%= form.label :entry_date, class: "label" %>
    <div class="control">
      <%= form.date_field :entry_date, class: "input", id: "diary_entry_date" %>
    </div>
    <p class="help" id="date-preview">Select a date to see the day name</p>
  </div>

  <div class="field">
    <%= form.label :content, "Diary Entry Content", class: "label" %>
    <div class="control">
      <%= form.rich_text_area :content, class: "rich-text-area", data: { behavior: "content-placeholder" } %>
    </div>
    <p class="help">Write your diary entry here...</p>
  </div>



  <div class="field">
    <div class="control">
      <%= form.submit class: "button is-primary" %>
    </div>
  </div>
<% end %>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const dateInput = document.getElementById('diary_entry_date');
  const datePreview = document.getElementById('date-preview');
  
  function updateDatePreview() {
    if (dateInput.value) {
      const selectedDate = new Date(dateInput.value + 'T00:00:00');
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      };
      const formattedDate = selectedDate.toLocaleDateString('en-US', options);
      datePreview.textContent = `ðŸ“… ${formattedDate}`;
      datePreview.classList.add('has-text-info');
    } else {
      datePreview.textContent = 'Select a date to see the day name';
      datePreview.classList.remove('has-text-info');
    }
  }
  
  // Update preview when date changes
  dateInput.addEventListener('change', updateDatePreview);
  
  // Update preview on page load if date is already set
  updateDatePreview();
});
</script>





