
<div class="columns is-centered is-vcentered" style="min-height: 70vh;">
  <div class="column is-4">
    <div class="box">
      <h2 class="title is-3 has-text-centered mb-4">Log in</h2>
      <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
        <div class="field">
          <label class="label"><%= f.label :email %></label>
          <div class="control">
            <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "input" %>
          </div>
        </div>

        <div class="field">
          <label class="label"><%= f.label :password %></label>
          <div class="control">
            <%= f.password_field :password, autocomplete: "current-password", class: "input" %>
          </div>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="field">
            <div class="control">
              <label class="checkbox">
                <%= f.check_box :remember_me %>
                <%= f.label :remember_me %>
              </label>
            </div>
          </div>
        <% end %>

        <div class="field is-grouped is-grouped-centered mt-4">
          <div class="control">
            <%= f.submit "Log in", class: "button is-primary is-fullwidth" %>
          </div>
        </div>
      <% end %>
      
      <!-- Demo Login Helper -->
      <% if params[:demo] == 'true' %>
        <div class="notification is-info is-light mt-3">
          <div class="content has-text-centered">
            <p class="has-text-weight-semibold">ðŸŽ¯ Demo Login Ready!</p>
            <p class="is-size-7">Form pre-filled with demo credentials - just click "Log in" below</p>
          </div>
        </div>
      <% end %>
      
      <div class="has-text-centered mt-3">
        <%= render "devise/shared/links" %>
      </div>
    </div>
  </div>
</div>

<script>
// Auto-fill demo credentials if demo parameter is present
document.addEventListener('DOMContentLoaded', function() {
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('demo') === 'true') {
    const emailField = document.querySelector('input[type="email"]');
    const passwordField = document.querySelector('input[type="password"]');
    
    if (emailField) {
      emailField.value = 'demo@digitaldiaryapp.com';
      emailField.style.background = '#f0f9ff';
    }
    
    if (passwordField) {
      passwordField.value = 'demopassword123';
      passwordField.style.background = '#f0f9ff';
    }
    
    // Focus on the login button for easy submission
    const loginButton = document.querySelector('input[type="submit"]');
    if (loginButton) {
      setTimeout(() => {
        loginButton.focus();
        loginButton.style.animation = 'pulse 2s infinite';
      }, 500);
    }
  }
});
</script>

<style>
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(72, 187, 120, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(72, 187, 120, 0); }
  100% { box-shadow: 0 0 0 0 rgba(72, 187, 120, 0); }
}
</style>
